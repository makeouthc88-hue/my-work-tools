<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åˆ†ç´…çµç®—ç³»çµ± v5.0 (Cloud)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Roboto+Mono:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .font-mono { font-family: 'Roboto Mono', monospace; }
        
        /* è¼¸å…¥æ¡†æ¨£å¼ */
        input { background: transparent; transition: all 0.2s; border-radius: 4px; }
        input:focus { outline: none; background-color: rgba(255,255,255,0.5); }
        input::placeholder { color: #cbd5e1; }
        
        /* éš±è—æ•¸å­—ç®­é ­ */
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        
        /* è‡ªå®šç¾©æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 2px; }

        /* æˆªåœ–æ™‚ç”¨çš„ class */
        .print-text { padding: 0 4px; display: inline-block; white-space: nowrap; }
        
        /* è¼‰å…¥ä¸­é®ç½© */
        #loading-overlay { position: fixed; inset: 0; background: rgba(255,255,255,0.9); z-index: 50; display: flex; justify-content: center; align-items: center; flex-direction: column; }
    </style>
</head>
<body class="py-6 px-4">

    <div id="loading-overlay">
        <div class="text-2xl font-bold text-slate-700 mb-2">æ­£åœ¨é€£ç·šè‡³è³‡æ–™åº«...</div>
        <div class="text-sm text-slate-400">Syncing with Firebase</div>
    </div>

    <div class="max-w-5xl mx-auto mb-6 flex flex-col md:flex-row justify-between items-center gap-4 no-export">
        <div class="flex items-center gap-4">
            <div class="text-xs text-slate-400 font-mono">SYSTEM v5.0 (Cloud)</div>
            <div id="cloud-status" class="text-xs font-bold px-2 py-1 rounded bg-slate-200 text-slate-500 transition-colors">
                â³ åˆå§‹åŒ–...
            </div>
        </div>
        <div class="flex gap-3">
            <button onclick="window.resetData()" class="text-sm text-slate-400 hover:text-red-500 transition px-3 py-2">
                â†º é‡ç½®é è¨­å€¼
            </button>
            <button onclick="downloadReport()" class="bg-slate-800 hover:bg-black text-white px-6 py-2.5 rounded-lg shadow-lg flex items-center gap-2 font-bold transition active:scale-95">
                <span id="btn-text">ğŸ“¸ ä¸‹è¼‰ JPG å ±è¡¨</span>
            </button>
        </div>
    </div>

    <div id="report-card" class="max-w-5xl mx-auto bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden relative">
        
        <div class="bg-gradient-to-r from-slate-900 to-slate-800 text-white p-8">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-6">
                <div>
                    <h1 class="text-3xl font-bold tracking-tight mb-1">è‚¡æ±åˆ†ç´…çµç®—è¡¨</h1>
                    <p class="text-slate-400 text-sm font-mono opacity-80">MONTHLY SETTLEMENT REPORT</p>
                </div>
                <div class="w-full md:w-auto">
                    <label class="block text-[10px] text-slate-400 uppercase font-bold mb-1 tracking-wider">çµç®—æ—¥æœŸç¯„åœ</label>
                    <input type="text" id="date-range" 
                           class="bg-white/10 border border-white/20 text-white text-center rounded px-3 py-1.5 w-full md:w-64 focus:border-blue-400 placeholder-white/30 text-sm font-mono"
                           placeholder="YYYY/MM/DD - YYYY/MM/DD" onchange="triggerSave()">
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 divide-y md:divide-y-0 md:divide-x divide-slate-100 border-b border-slate-100">
            
            <div class="p-6 bg-emerald-50/20">
                <p class="text-[10px] font-bold text-emerald-600 uppercase tracking-widest mb-1">ç¸½æ”¶å…¥ REVENUE</p>
                <div class="flex items-center">
                    <span class="text-xl text-emerald-500 mr-2 font-bold">$</span>
                    <input type="number" id="income" class="text-3xl font-mono font-bold text-emerald-700 w-full bg-transparent" placeholder="0" oninput="calculateAndSave()">
                </div>
            </div>

            <div class="p-6 bg-rose-50/20 relative group">
                <div class="flex justify-between items-center mb-1">
                    <p class="text-[10px] font-bold text-rose-600 uppercase tracking-widest">ç¸½æ”¯å‡º EXPENSES</p>
                    <button onclick="window.addExpense()" class="opacity-0 group-hover:opacity-100 transition text-[10px] bg-rose-100 text-rose-600 px-2 py-0.5 rounded font-bold no-export">+ é …ç›®</button>
                </div>
                <div class="flex items-center mb-3">
                    <span class="text-lg text-rose-500 mr-2 font-bold">$</span>
                    <span id="total-expenses" class="text-2xl font-mono font-bold text-rose-600">0</span>
                </div>
                <div id="expense-list" class="space-y-1 max-h-40 overflow-y-auto pr-1">
                    </div>
            </div>

            <div class="p-6">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">æ·¨åˆ© NET PROFIT</p>
                <div class="flex items-center">
                    <span class="text-xl text-slate-300 mr-2 font-bold">$</span>
                    <span id="net-profit" class="text-3xl font-mono font-bold text-slate-800">0</span>
                </div>
                <div class="mt-4 flex items-center gap-2">
                    <span id="percent-status" class="text-xs font-bold px-2 py-1 rounded bg-slate-100 text-slate-500">æª¢æŸ¥ä¸­...</span>
                </div>
            </div>
        </div>

        <div class="p-6 md:p-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-slate-800 text-lg flex items-center gap-2">
                    <div class="w-1 h-5 bg-blue-600 rounded-full"></div>
                    åˆ†é…è©³æƒ…
                </h3>
                <button onclick="window.addShareholder()" class="text-xs bg-blue-50 text-blue-600 hover:bg-blue-100 px-3 py-1.5 rounded-full font-bold transition no-export">
                    + æ–°å¢è‚¡æ±
                </button>
            </div>

            <div class="overflow-x-auto rounded-lg border border-slate-200">
                <table class="w-full text-left border-collapse min-w-[700px]">
                    <thead>
                        <tr class="bg-slate-50 text-xs text-slate-500 font-bold uppercase border-b border-slate-200">
                            <th class="py-3 pl-4 w-24">è‚¡æ±</th>
                            <th class="py-3 text-center w-16">%</th>
                            <th class="py-3 text-right w-28">åˆ†ç´…</th>
                            <th class="py-3 pl-6 border-l border-slate-100">ä»£å¢Š / èª¿æ•´ (Adjustment)</th>
                            <th class="py-3 text-right w-36 bg-amber-50 text-amber-800/70 border-l border-amber-100">å¯¦é ˜é‡‘é¡</th>
                            <th class="w-10 no-export"></th>
                        </tr>
                    </thead>
                    <tbody id="shareholder-list" class="divide-y divide-slate-100 text-sm">
                        </tbody>
                    <tfoot class="bg-slate-50 font-bold text-slate-600 border-t border-slate-200">
                        <tr>
                            <td colspan="2" class="py-3 text-right pr-4 text-[10px] uppercase tracking-wide">Total Amount</td>
                            <td class="py-3 text-right font-mono text-slate-800" id="sum-dividend">0</td>
                            <td class="py-3 text-right pr-6 text-[10px] font-normal text-slate-400">(Adjust: <span id="sum-adjust">0</span>)</td>
                            <td class="py-3 text-right font-mono text-xl text-amber-600 bg-amber-50" id="sum-grand">0</td>
                            <td class="no-export"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div class="bg-slate-50 px-8 py-3 border-t border-slate-200 flex justify-between items-center text-[10px] text-slate-300 uppercase">
            <span>Confidential Financial Report</span>
            <span>Generated: <span id="print-date"></span></span>
        </div>
    </div>

    <div class="h-24"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDsUsWuynci0DP71veuu19Ht8bJmhHSkHs",
            authDomain: "worktools-f53e5.firebaseapp.com",
            databaseURL: "https://worktools-f53e5-default-rtdb.firebaseio.com",
            projectId: "worktools-f53e5",
            storageBucket: "worktools-f53e5.firebasestorage.app",
            messagingSenderId: "950551082090",
            appId: "1:950551082090:web:3c2c4962b5ffa044aec613",
            measurementId: "G-EKPY3SC0BR"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const dbRef = ref(db, 'settlements/current_v5'); // è³‡æ–™å„²å­˜è·¯å¾‘

        let isFirstLoad = true;
        let saveTimeout = null;

        // å…¨åŸŸè®Šæ•¸ä¾› HTML onclick ä½¿ç”¨
        window.expenses = [];
        window.shareholders = [];
        let income = 0;
        let dateRange = '';

        // === ç›£è½é›²ç«¯è³‡æ–™ (è®€å–) ===
        onValue(dbRef, (snapshot) => {
            const data = snapshot.val();
            
            // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¼‰å…¥ï¼Œæˆ–è€…è³‡æ–™æœ‰æ›´æ–°ï¼Œæˆ‘å€‘æ›´æ–°æœ¬åœ°è®Šæ•¸
            if (data) {
                window.expenses = data.expenses || [];
                window.shareholders = data.shareholders || [];
                income = data.income || 0;
                dateRange = data.dateRange || '';
                
                // åªæœ‰ç¬¬ä¸€æ¬¡è¼‰å…¥æˆ–éç·¨è¼¯ç‹€æ…‹æ™‚ï¼Œæ‰æ›´æ–° DOM é¿å…å¹²æ“¾æ‰“å­—
                // é€™è£¡ç‚ºäº†ç°¡å–®èµ·è¦‹ï¼Œæ¯æ¬¡éƒ½æ¸²æŸ“ï¼Œä½†é€é debounce æ¸›å°‘è¡çª
                updateDOMValues(); 
                renderAll();
            } else {
                // è³‡æ–™åº«æ˜¯ç©ºçš„ (ç¬¬ä¸€æ¬¡ä½¿ç”¨)ï¼Œè¼‰å…¥é è¨­å€¼
                if(isFirstLoad) {
                    window.resetData(false); // false = don't confirm
                }
            }

            // ç§»é™¤ Loading
            if(isFirstLoad) {
                document.getElementById('loading-overlay').style.display = 'none';
                isFirstLoad = false;
            }
            updateStatus('cloud-synced');
        });

        // æ›´æ–° DOM æ•¸å€¼ (ä¸é‡æ–°æ¸²æŸ“åˆ—è¡¨ï¼Œåªå¡«å…¥å€¼ï¼Œé˜²æ­¢æ¸¸æ¨™è·³æ‰ - ç°¡æ˜“ç‰ˆç›´æ¥é‡ç¹ª)
        function updateDOMValues() {
            const incEl = document.getElementById('income');
            if(document.activeElement !== incEl) incEl.value = income;

            const dateEl = document.getElementById('date-range');
            if(document.activeElement !== dateEl) dateEl.value = dateRange;
        }

        // === å¯«å…¥é›²ç«¯ (å„²å­˜) ===
        // ä½¿ç”¨ Debounce é˜²æ­¢æ‰“å­—æ™‚ç˜‹ç‹‚å¯«å…¥è³‡æ–™åº«
        window.triggerSave = function() {
            updateStatus('saving');
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => {
                saveToFirebase();
            }, 500); // åœæ­¢æ‰“å­— 0.5 ç§’å¾Œæ‰ä¸Šå‚³
        }

        function saveToFirebase() {
            set(dbRef, {
                income: document.getElementById('income').value,
                dateRange: document.getElementById('date-range').value,
                expenses: window.expenses,
                shareholders: window.shareholders,
                lastUpdated: new Date().toISOString()
            }).then(() => {
                updateStatus('synced');
            }).catch((err) => {
                console.error(err);
                updateStatus('error');
            });
        }

        // ç‹€æ…‹é¡¯ç¤º UI
        function updateStatus(state) {
            const el = document.getElementById('cloud-status');
            if(state === 'saving') {
                el.innerText = "ğŸ’¾ å„²å­˜ä¸­...";
                el.className = "text-xs font-bold px-2 py-1 rounded bg-amber-100 text-amber-600";
            } else if (state === 'synced' || state === 'cloud-synced') {
                el.innerText = "â˜ï¸ å·²åŒæ­¥";
                el.className = "text-xs font-bold px-2 py-1 rounded bg-emerald-100 text-emerald-600";
            } else if (state === 'error') {
                el.innerText = "âŒ é€£ç·šå¤±æ•—";
                el.className = "text-xs font-bold px-2 py-1 rounded bg-red-100 text-red-600";
            }
        }

        // === æš´éœ²çµ¦ window çš„æ“ä½œå‡½å¼ ===
        window.calculateAndSave = function() {
            calculate();
            window.triggerSave();
        }

        window.updateExp = (i, k, v) => { window.expenses[i][k] = v; if(k==='amount') calculate(); window.triggerSave(); };
        window.addExpense = () => { window.expenses.push({name:'', amount:''}); renderAll(); window.triggerSave(); };
        window.removeExp = (i) => { window.expenses.splice(i, 1); renderAll(); window.triggerSave(); };

        window.updateSh = (i, k, v) => { window.shareholders[i][k] = k==='percent'? parseFloat(v)||0 : v; if(k==='percent') calculate(); window.triggerSave(); };
        window.addShareholder = () => { window.shareholders.push({name:'New', percent:0, adjustments:[]}); renderAll(); window.triggerSave(); };
        window.removeSh = (i) => { if(confirm('åˆªé™¤?')) { window.shareholders.splice(i,1); renderAll(); window.triggerSave(); } };
        
        window.addAdj = (si) => { window.shareholders[si].adjustments.push({item:'', amount:''}); renderShareholders(); window.triggerSave(); };
        window.removeAdj = (si, ai) => { window.shareholders[si].adjustments.splice(ai, 1); renderShareholders(); calculate(); window.triggerSave(); };
        window.updateAdj = (si, ai, k, v) => { window.shareholders[si].adjustments[ai][k] = v; if(k==='amount') calculate(); window.triggerSave(); };

        window.resetData = (ask = true) => {
            if(!ask || confirm('ç¢ºå®šé‡ç½®ç‚ºé è¨­ç¯„æœ¬ï¼Ÿ(é€™æœƒè¦†è“‹é›²ç«¯è³‡æ–™)')) {
                const defaultData = {
                    shareholders: [
                        { name: 'OG', percent: 67, adjustments: [{item: 'è»Šè³‡', amount: 500}] },
                        { name: 'C', percent: 28, adjustments: [] },
                        { name: 'é»‘', percent: 5, adjustments: [] }
                    ],
                    expenses: [{ name: 'æ”¶éŒ¢', amount: 1200 }],
                    income: 22227,
                    dateRange: ''
                };
                
                window.expenses = defaultData.expenses;
                window.shareholders = defaultData.shareholders;
                document.getElementById('income').value = defaultData.income;
                document.getElementById('date-range').value = defaultData.dateRange;
                
                renderAll();
                saveToFirebase(); // Force save
            }
        }

        // åˆå§‹åŒ–æ—¥æœŸ
        document.getElementById('print-date').innerText = new Date().toLocaleDateString();

        // ç¶å®š DOM é‚è¼¯
        function renderAll() {
            renderExpenses();
            renderShareholders();
            calculate();
        }

        function renderExpenses() {
            const list = document.getElementById('expense-list');
            list.innerHTML = window.expenses.map((exp, i) => `
                <div class="flex gap-2 items-center text-sm group mb-1">
                    <input type="text" value="${exp.name}" onchange="window.updateExp(${i}, 'name', this.value)" 
                           class="flex-1 border-b border-transparent focus:border-rose-300 text-slate-600 py-0.5 bg-transparent" placeholder="é …ç›®">
                    <input type="number" value="${exp.amount}" onkeyup="window.updateExp(${i}, 'amount', this.value)" 
                           class="w-20 border-b border-transparent focus:border-rose-300 text-right font-mono text-rose-600 py-0.5 bg-transparent" placeholder="$">
                    <button onclick="window.removeExp(${i})" class="text-slate-300 hover:text-rose-500 opacity-0 group-hover:opacity-100 px-1 transition no-export">Ã—</button>
                </div>
            `).join('');
        }

        function renderShareholders() {
            const list = document.getElementById('shareholder-list');
            list.innerHTML = window.shareholders.map((sh, idx) => {
                let adjHtml = (sh.adjustments || []).map((adj, aIdx) => `
                    <div class="flex items-center gap-2 mb-1 group/adj">
                        <div class="flex-1 flex items-center bg-slate-50 rounded px-2 py-0.5 border border-slate-100 hover:border-blue-200 transition-colors">
                            <span class="text-slate-300 text-xs mr-1 select-none">â†³</span>
                            <input type="text" value="${adj.item}" onchange="window.updateAdj(${idx}, ${aIdx}, 'item', this.value)" 
                                   class="w-full text-xs text-slate-600 bg-transparent font-medium" placeholder="é …ç›®">
                            <input type="number" value="${adj.amount}" onkeyup="window.updateAdj(${idx}, ${aIdx}, 'amount', this.value)" 
                                   class="w-16 text-right text-xs font-mono text-slate-700 bg-transparent" placeholder="$">
                        </div>
                        <button onclick="window.removeAdj(${idx}, ${aIdx})" class="text-slate-300 hover:text-red-400 opacity-0 group-hover/adj:opacity-100 transition px-1 text-xs no-export">Ã—</button>
                    </div>
                `).join('');

                return `
                <tr class="group hover:bg-slate-50/50 transition-colors">
                    <td class="py-3 pl-4 align-top pt-4">
                        <input type="text" value="${sh.name}" onchange="window.updateSh(${idx}, 'name', this.value)" 
                               class="w-full font-bold text-slate-700 text-lg bg-transparent border-b-2 border-transparent focus:border-blue-500 pb-1">
                    </td>
                    <td class="py-3 text-center align-top pt-5">
                        <input type="number" value="${sh.percent}" onkeyup="window.updateSh(${idx}, 'percent', this.value)" 
                               class="w-12 text-center text-slate-500 font-mono bg-slate-100 rounded focus:bg-white focus:ring-1 focus:ring-blue-500 text-sm py-0.5">
                    </td>
                    <td class="py-3 text-right font-mono text-slate-600 pr-4 align-top pt-5" id="sh-div-${idx}">0</td>
                    <td class="py-3 pl-6 pr-2 align-top border-l border-slate-50">
                        <div class="min-h-[24px]">
                            ${adjHtml}
                            <button onclick="window.addAdj(${idx})" class="text-[10px] bg-slate-100 hover:bg-slate-200 text-slate-500 px-2 py-1 rounded-full mt-1 flex items-center gap-1 transition no-export">
                                + å¢åŠ 
                            </button>
                        </div>
                    </td>
                    <td class="py-3 text-right font-mono font-bold text-lg text-amber-600 bg-amber-50 border-l border-amber-100 align-top pt-5 pr-4" id="sh-grand-${idx}">0</td>
                    <td class="py-3 text-center align-top pt-5 no-export">
                        <button onclick="window.removeSh(${idx})" class="text-slate-300 hover:text-red-400 transition">ğŸ—‘ï¸</button>
                    </td>
                </tr>
                `;
            }).join('');
        }

        function calculate() {
            let inc = parseFloat(document.getElementById('income').value) || 0;
            let totalExp = window.expenses.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0);
            let net = inc - totalExp;

            document.getElementById('total-expenses').innerText = totalExp.toLocaleString();
            document.getElementById('net-profit').innerText = net.toLocaleString();

            let totalPercent = 0;
            let sumDiv = 0, sumAdj = 0, sumGrand = 0;

            window.shareholders.forEach((sh, idx) => {
                let div = Math.floor(net * (sh.percent / 100));
                let adjTotal = (sh.adjustments || []).reduce((sum, adj) => sum + (parseFloat(adj.amount) || 0), 0);
                let grand = div + adjTotal;

                const divEl = document.getElementById(`sh-div-${idx}`);
                const grandEl = document.getElementById(`sh-grand-${idx}`);
                if(divEl) divEl.innerText = div.toLocaleString();
                if(grandEl) grandEl.innerText = grand.toLocaleString();

                totalPercent += parseFloat(sh.percent);
                sumDiv += div;
                sumAdj += adjTotal;
                sumGrand += grand;
            });

            document.getElementById('sum-dividend').innerText = sumDiv.toLocaleString();
            document.getElementById('sum-adjust').innerText = sumAdj.toLocaleString();
            document.getElementById('sum-grand').innerText = sumGrand.toLocaleString();

            const statusEl = document.getElementById('percent-status');
            if (Math.abs(totalPercent - 100) < 0.01) {
                statusEl.innerHTML = "âœ“ æŒè‚¡æ¯”ä¾‹ 100%";
                statusEl.className = "text-xs font-bold px-2 py-1 rounded bg-emerald-100 text-emerald-700";
            } else {
                statusEl.innerHTML = `âš ï¸ ç•°å¸¸: ${totalPercent}%`;
                statusEl.className = "text-xs font-bold px-2 py-1 rounded bg-rose-100 text-rose-700";
            }
        }
    </script>

    <script>
        // === æˆªåœ–é‚è¼¯ (ä¿æŒä¸è®Š) ===
        function downloadReport() {
            const btnText = document.getElementById('btn-text');
            btnText.innerText = "è™•ç†ä¸­...";
            const originalNode = document.getElementById('report-card');
            const cloneNode = originalNode.cloneNode(true);
            cloneNode.style.width = "1000px";
            cloneNode.style.position = "absolute";
            cloneNode.style.top = "-9999px";
            cloneNode.style.left = "-9999px";
            cloneNode.style.zIndex = "-1";
            document.body.appendChild(cloneNode);

            const inputs = cloneNode.querySelectorAll('input');
            inputs.forEach(input => {
                const val = input.value;
                const span = document.createElement('span');
                span.innerText = val;
                span.className = input.className + " print-text";
                span.style.border = "none"; 
                span.style.background = "transparent";
                span.style.width = "auto";
                if(input.parentElement) {
                    input.parentElement.replaceChild(span, input);
                }
            });

            const noExports = cloneNode.querySelectorAll('.no-export');
            noExports.forEach(el => el.remove());

            html2canvas(cloneNode, {
                scale: 2,
                backgroundColor: "#ffffff",
                width: 1000,
                windowWidth: 1000,
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `çµç®—è¡¨_${document.getElementById('date-range').value || 'Report'}.jpg`;
                link.href = canvas.toDataURL("image/jpeg", 0.95);
                link.click();
                document.body.removeChild(cloneNode);
                btnText.innerText = "ğŸ“¸ ä¸‹è¼‰ JPG å ±è¡¨";
            }).catch(err => {
                alert("æˆªåœ–å¤±æ•—ï¼Œè«‹é‡è©¦");
                console.error(err);
                document.body.removeChild(cloneNode);
                btnText.innerText = "ğŸ“¸ ä¸‹è¼‰ JPG å ±è¡¨";
            });
        }
    </script>
</body>
</html>